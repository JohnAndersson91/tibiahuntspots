<!DOCTYPE html>
<html>
<head>
    <title>Tibia Hunt Spots</title>
    <style>
        body { background-color: #222; color: #eee; font-family: sans-serif; margin: 0; padding: 0; }
        nav { background-color: #111; padding: 10px; display: flex; gap: 10px; }
        nav button { padding: 8px 12px; cursor: pointer; background: #333; color: #eee; border: none; border-radius: 4px; }
        nav button:hover { background: #555; }
        section { display: none; padding: 20px; }
        section.active { display: block; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #555; padding: 8px; text-align: center; }
        th { cursor: pointer; background-color: #333; }
        img { width: 80px; height: 80px; margin: 2px; }
        form { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; }
        input[type=text], input[type=number], input[type=file] { padding: 4px; border-radius: 4px; border: 1px solid #555; background-color: #333; color: #eee; }
        button.addBtn { background-color: #007bff; color: #fff; }
        button.removeBtn { background-color: #ff4c4c; color: #fff; }
        #login-screen { padding: 50px; text-align: center; }
        #login-screen input { padding: 8px; border-radius: 4px; border: 1px solid #555; background-color: #333; color: #eee; }
    </style>
</head>
<body>

<div id="login-screen">
    <h2>Enter Password to Manage Spots</h2>
    <input type="password" id="password" placeholder="Password">
    <button onclick="checkPassword()">Login</button>
</div>

<div id="main-content" style="display:none;">

<nav>
    <button onclick="showSection('knight')">Knight</button>
    <button onclick="showSection('paladin')">Paladin</button>
    <button onclick="showSection('mage')">Mage</button>
    <button onclick="showSection('monk')">Monk</button>
    <button onclick="showSection('duo')">Duo</button>
</nav>

<section id="knight" class="active"></section>
<section id="paladin"></section>
<section id="mage"></section>
<section id="monk"></section>
<section id="duo"></section>

</div>

<script>
const PASSWORD = "mypassword123"; // set your own password
const SECTIONS = ['knight','paladin','mage','monk','duo'];

function checkPassword() {
    const input = document.getElementById('password').value;
    if(input === PASSWORD){
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
        initializeSections();
        loadAllSpots();
    } else {
        alert("Incorrect password!");
    }
}

function showSection(id) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

// Initialize all sections with form and table
function initializeSections() {
    SECTIONS.forEach(sec => {
        const section = document.getElementById(sec);
        section.innerHTML = `
        <form onsubmit="addSpot(event, '${sec}')">
            <input type="text" name="spot" placeholder="Spot Name" required>
            <input type="number" name="level" placeholder="Level" required>
            <input type="number" name="exp" placeholder="Raw Exp" required>
            <input type="number" name="profit" placeholder="Profit" required>
            <input type="file" name="img1" required>
            <input type="file" name="img2" required>
            <button type="submit" class="addBtn">Add Spot</button>
        </form>
        <table id="table-${sec}">
            <tr>
                <th>Hunting Spot</th>
                <th onclick="sortTable('table-${sec}',1)">Level ⬍</th>
                <th onclick="sortTable('table-${sec}',2)">Raw Exp ⬍</th>
                <th onclick="sortTable('table-${sec}',3)">Profit ⬍</th>
                <th>Images</th>
                <th>Remove</th>
            </tr>
        </table>`;
    });
}

// Add spot
function addSpot(event, sectionId){
    event.preventDefault();
    const form = event.target;
    const table = document.getElementById('table-'+sectionId);

    const spot = form.spot.value;
    const level = form.level.value;
    const exp = form.exp.value;
    const profit = form.profit.value;

    const img1 = form.img1.files[0];
    const img2 = form.img2.files[0];

    const reader1 = new FileReader();
    const reader2 = new FileReader();

    reader1.onload = () => {
        reader2.onload = () => {
            const rowData = {
                spot, level, exp, profit,
                img1: reader1.result, img2: reader2.result
            };
            saveSpot(sectionId, rowData);
            renderSpot(sectionId, rowData);
        }
        reader2.readAsDataURL(img2);
    }
    reader1.readAsDataURL(img1);

    form.reset();
}

// Save spot to localStorage
function saveSpot(sectionId, spotData){
    let spots = JSON.parse(localStorage.getItem(sectionId) || "[]");
    spots.push(spotData);
    localStorage.setItem(sectionId, JSON.stringify(spots));
}

// Render spot in table
function renderSpot(sectionId, data){
    const table = document.getElementById('table-'+sectionId);
    const row = table.insertRow();
    row.insertCell(0).innerText = data.spot;
    row.insertCell(1).innerText = data.level;
    row.insertCell(2).innerText = data.exp;
    row.insertCell(3).innerText = data.profit;

    const cellImages = row.insertCell(4);
    const image1 = document.createElement('img');
    image1.src = data.img1;
    const image2 = document.createElement('img');
    image2.src = data.img2;
    cellImages.appendChild(image1);
    cellImages.appendChild(image2);

    const cellRemove = row.insertCell(5);
    const removeBtn = document.createElement('button');
    removeBtn.className = 'removeBtn';
    removeBtn.innerText = "Remove";
    removeBtn.onclick = () => removeSpot(sectionId, row, data);
    cellRemove.appendChild(removeBtn);
}

// Remove spot
function removeSpot(sectionId, row, data){
    row.remove();
    let spots = JSON.parse(localStorage.getItem(sectionId) || "[]");
    spots = spots.filter(s => !(s.spot===data.spot && s.level===data.level && s.exp===data.exp && s.profit===data.profit));
    localStorage.setItem(sectionId, JSON.stringify(spots));
}

// Load all spots from localStorage
function loadAllSpots(){
    SECTIONS.forEach(sec => {
        let spots = JSON.parse(localStorage.getItem(sec) || "[]");
        spots.forEach(s => renderSpot(sec, s));
    });
}

// Sort table visually without changing localStorage
function sortTable(tableId, colIndex){
    const table = document.getElementById(tableId);
    if(!table.sortDirection) table.sortDirection = 1;
    else table.sortDirection *= -1;

    // Get rows excluding header
    const rows = Array.from(table.rows).slice(1);

    // Sort rows
    rows.sort((a,b) => {
        const valA = parseFloat(a.cells[colIndex].innerText) || 0;
        const valB = parseFloat(b.cells[colIndex].innerText) || 0;
        return (valA - valB) * table.sortDirection;
    });

    // Remove old rows from table
    rows.forEach(row => table.appendChild(row));
}
</script>

</body>
</html>
